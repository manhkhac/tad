<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
<script> var tmbq = '127.0.0.1'; </script>
    <link as='style' href='https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.5.0/css/bootstrap.min.css' media='all' rel='stylesheet' />

    <script crossorigin='anonymous'
        integrity='sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg=='
        src='https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js'></script>

    <script src='https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.5.0/js/bootstrap.min.js'></script>


    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/5.14.0/css/all.min.css" media="all">

</head>
<body>

    <input class="form-control tad-in-text1 mb-2" placeholder="Nhập tên của bạn" value="Đạt">
    <div class="mt-3">
        <button class="btn btn-primary disabled" id="tad-taoanh" type="button"><i class="fas fa-cut"></i> Tạo ảnh</button>
        </div>

        <div id="img-out"></div> 
        <canvas id="temp" width="1600" height="900"></canvas>
    <script>

var e = $(".tad-in-text1");
		var g = $(".tad-in-text2");
		e.on("input", function() {
			h()
		});
		g.on("input", function() {
			h()
		});

		function h() {
			if (undefined !== e.val() && e.val().length == 0) {
				$("#tad-taoanh").addClass("disabled")
			} else {
				if (undefined !== g.val() && g.val().length == 0) {
					$("#tad-taoanh").addClass("disabled")
				} else {
					$("#tad-taoanh").removeClass("disabled")
				}
			}
		}

$("#tad-taoanh").click(function(){

    $("#img-out").hide();
			$("#tad-taoanh").addClass("disabled").html("<span class='spinner-border spinner-border-sm'></span> Đang tạo ảnh");

$.get("./main.svg", function(m) {
  
var t1 = $(".tad-in-text1").val();

  var xxx = (new XMLSerializer).serializeToString(m)

xxx = xxx.replace(/tadin1/g, t1);

xxx = xxx.replace(/tadin2/g, t1);

  var n = "data:image/svg+xml;base64," + window.btoa(unescape(encodeURIComponent(xxx)));

  $("body").append("<img class='w-100' src='"+n+"'>")


  var a = new Image();
            a.crossOrigin = "Anonymous";
            a.src = n;
            a.onload = function () {


  var c = document.getElementById("temp");
  var ctx = c.getContext("2d");

  ctx.drawImage(a, 0, 0, c.width, c.height);


            }

})
})
    </script>
</body>
</html>