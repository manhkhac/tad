

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>

    <link as='style' href='https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.5.0/css/bootstrap.min.css' media='all' rel='stylesheet' />

    <script crossorigin='anonymous'
        integrity='sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg=='
        src='https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js'></script>

    <script src='https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.5.0/js/bootstrap.min.js'></script>


    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/5.14.0/css/all.min.css" media="all">

</head>
<body>

<style>/* anime */
    div#tad-chonnv{overflow:auto;margin-bottom:10px!important;flex-wrap:nowrap!important;display:flex;padding-left:5px;max-height:140px}div#tad-chonnv>div{width:120px;height:110px;overflow: hidden;margin-top:10px;margin-bottom:10px;margin-right:15px;background-color:#fff;border:1px solid #dee2e6;border-radius:.25rem;max-width:100%;cursor:pointer;-ms-flex:none;flex:none;position:relative}div#tad-chonnv>div>i{width:120px;height:120px;display:block;background-size:cover;position:absolute;bottom:0;z-index:99}div#tad-chonnv>div>span { font-weight: bold; text-transform: uppercase; font-size: 22px; position: absolute; top: 0; left: 5px; color: #aaa; }div#tad-chonnv>div.active{box-shadow:0 0 0 .2rem rgba(38,143,255 ,0.5);border-color:rgba(38, 143, 255 ,0.5)}#doimaunen{border-radius:.25rem!important}.demomau{position:absolute;padding:10px;right:0;margin:7px;border:2px solid #ddd;border-radius:3px;z-index:9;pointer-events:none}.has-search .form-control{padding-left:2.375rem}.has-search .form-control-feedback{position:absolute;z-index:2;display:block;width:2.375rem;height:2.375rem;line-height:2.375rem;text-align:center;pointer-events:none;color:#aaa}
    @media only screen and (max-width: 576px) {
    div#tad-chonnv { max-height: 235px; flex-direction: column; flex-wrap: wrap !important;align-content: flex-start; }div#tad-chonnv>div { width: 100px; height: 90px; } div#tad-chonnv>div>i { width: 100px; height: 100px; } div#tad-chonnv>div>span { font-size: 20px; }
    }</style>

    <!--more--><label class="label-chonnv">Chọn nhân vật <span>(842)</span> <a class="badge badge-primary mr-2" href="javascript:void(0)"><i class="fas fa-random"></i> Xếp ngẫu nhiên</a></label>
  
    <select class="custom-select mb-2" onchange="timdm()" onclick="timdm()" id="chondanhmuc">
<option value="">Tất cả</option>
    </select>

   
    <div class="mb-2 has-search">
    <span class="fa fa-search form-control-feedback"></span>
    <input type="text" id="tad-timnv" onkeyup="timnv()" class="form-control" placeholder="Tìm nhân vật">
    </div>
    <div id="tad-chonnv" class="tad-scrollbar"></div>
    <label><b>Nhập tên*</b></label>
    <input type="text" class="form-control tad-in-text1 mb-2" placeholder="Nhập tên của bạn" maxlength="22">
    <input type="text" class="form-control tad-in-text2 mb-2" placeholder="Nhập Slogan" maxlength="33">
    <label>Màu nền</label>
    <div class="input-group">
    <input class="form-control colorpicker-element" id="doimaunen" placeholder="Nhập mã màu" value="#f20000">
    <div class="demomau demomaunen"></div></div>
    <div class="mt-3">
    <button type="button" class="btn btn-primary disabled d-block" id="tad-taoanh"><i class="fas fa-cut"></i> Tạo
    ảnh</button>
    </div>
    <link href="https://cdn.taoanhdep.com/tad/effect/cover-anime-2/fonts/stylesheet.css" rel="stylesheet">
    
    <canvas id="temp" width="2000" height="740" style="display:none"></canvas>
    <div id="img-out"></div>
    <style>div#tad-chonnv>div>span { font-family: "GMV DIN Pro Cond"; }
    </style>
    <script>var tenanhxuat="cover_anime_2";
    </script>

<style>

.dm-block{display: block;}
.dm-none{display: none;}

#tad-chonnv b{display: none;}
</style>
<script>function hoa_dau(string) {
  //1. Tách các từ, cụm từ trong chuỗi ban đầu
  let sentence = string.toLowerCase().split(" ");

  //2. Tạo vòng lặp và viết hoa chữ cái đầu tiên của các từ, cụm từ trên
  for(var i = 0; i< sentence.length; i++){
     sentence[i] = sentence[i][0].toUpperCase() + sentence[i].slice(1);
  }
  //3. Nối các từ, cụm từ đã xử lý ở trên và trả về kết quả
  return sentence.join(" ");
}</script>
    <script src="./js/anime.js"></script>
    <script>function xoa_dau(a) {
        a = a.replace(/à|á|ạ|ả|ã|â|ầ|ấ|ậ|ẩ|ẫ|ă|ằ|ắ|ặ|ẳ|ẵ/g, "a");
        a = a.replace(/è|é|ẹ|ẻ|ẽ|ê|ề|ế|ệ|ể|ễ/g, "e");
        a = a.replace(/ì|í|ị|ỉ|ĩ/g, "i");
        a = a.replace(/ò|ó|ọ|ỏ|õ|ô|ồ|ố|ộ|ổ|ỗ|ơ|ờ|ớ|ợ|ở|ỡ/g, "o");
        a = a.replace(/ù|ú|ụ|ủ|ũ|ư|ừ|ứ|ự|ử|ữ/g, "u");
        a = a.replace(/ỳ|ý|ỵ|ỷ|ỹ/g, "y");
        a = a.replace(/đ/g, "d");
        a = a.replace(/À|Á|Ạ|Ả|Ã|Â|Ầ|Ấ|Ậ|Ẩ|Ẫ|Ă|Ằ|Ắ|Ặ|Ẳ|Ẵ/g, "A");
        a = a.replace(/È|É|Ẹ|Ẻ|Ẽ|Ê|Ề|Ế|Ệ|Ể|Ễ/g, "E");
        a = a.replace(/Ì|Í|Ị|Ỉ|Ĩ/g, "I");
        a = a.replace(/Ò|Ó|Ọ|Ỏ|Õ|Ô|Ồ|Ố|Ộ|Ổ|Ỗ|Ơ|Ờ|Ớ|Ợ|Ở|Ỡ/g, "O");
        a = a.replace(/Ù|Ú|Ụ|Ủ|Ũ|Ư|Ừ|Ứ|Ự|Ử|Ữ/g, "U");
        a = a.replace(/Ỳ|Ý|Ỵ|Ỷ|Ỹ/g, "Y");
        a = a.replace(/Đ/g, "D");
        return a
    }
    

    function timnv() {
        var a, m, k, j, n, l, i;
        a = document.getElementById("tad-timnv");
        m = a.value.toUpperCase();
        k = document.getElementById("tad-chonnv");
        j = k.getElementsByTagName("div");
        for (l = 0; l < j.length; l++) {
            n = j[l].getElementsByTagName("span")[0];
            i = n.textContent || n.innerText;
            if (i.toUpperCase().indexOf(m) > -1) {
                j[l].style.display = ""
            } else {
                j[l].style.display = "none"
            }
        }
    }
    
    
    function timdm() {
        var a, m, k, j, n, l, i;
        a = document.getElementById("chondanhmuc");
        m = a.value.toUpperCase();
        k = document.getElementById("tad-chonnv");
        j = k.getElementsByTagName("div");
        for (l = 0; l < j.length; l++) {
            n = j[l].getElementsByTagName("b")[0];
            i = n.textContent || n.innerText;

            if (m =="") {

j[l].classList.remove("dm-block");
j[l].classList.remove("dm-none");

}
           else if (i.toUpperCase() == m) {
                j[l].classList.remove("dm-block");
                j[l].classList.remove("dm-none");
                j[l].classList.add("dm-block");
            } else {
                j[l].classList.remove("dm-block");
                j[l].classList.remove("dm-none");
                j[l].classList.add("dm-none");
            }
        

        }
    }




var dsDm = [];

for (var i = 0; i < dsAnime.length; i++) {
    dsDm.push(dsAnime[i].dm);
}


dsDm.sort();
var current = null;
    var cnt = 0;
    for (var i = 0; i < dsDm.length; i++) {
        if (dsDm[i] != current) {
            if (cnt > 0) {
            
                var option = document.createElement("option");
                var textnode = document.createTextNode(hoa_dau(current.replace(/-/g, " ")) +" ("+ cnt+")");
  option.appendChild(textnode);
  option.value = current; 
                document.getElementById("chondanhmuc").appendChild(option);

            }
            current = dsDm[i];
            cnt = 1;
        } else {
            cnt++;
        }
    }
    // if (cnt > 0) {
    //     // document.write(current + ' (' + cnt + ')');
    // }


// for(var ii= 0;ii<counts.length;ii++ ){
// if(dsDm[ii] != undefined){


// var option = document.createElement("option");
//   var textnode = document.createTextNode(hoa_dau(dsDm[ii].replace(/-/g, " ")));
//   option.appendChild(textnode);
//   option.value = dsDm[ii]; 
//   document.getElementById("chondanhmuc").appendChild(option);


// }
// }


    $(document).ready(function() {
        // if (window.location.hostname == tmbq) {
            var g = document.getElementById("tad-chonnv");
            dsAnime.forEach(function(c) {
                var b = document.createElement("div");
                var a = c.imgAnime;

if(a.slice(10,15)=="imgur"){

    var d = a.substring(a.lastIndexOf("#") + 1, a.length).replace(/-/g, " ")
    var zzzz = c.imgAnime.replace(/.png/g, "_d.png?maxwidth=120");
    b.innerHTML = "<span>" + d + "</span><i style='background-image: url(" + zzzz + ");'></i>";


$("body").append("<img src='"+c.imgAnime+"'referrerpolicy='no-referrer' style='width:10px'>");
$("body").append("<img src='"+zzzz+"'referrerpolicy='no-referrer' style='width:10px'>");

}else{

                var d = a.substring(a.lastIndexOf("/") + 1, a.length).replace(/-/g, " ").replace(/.png/g, "");
   
                b.innerHTML = "<span>" + d + "</span><i style='background-image: url(" + c.imgAnime.replace(/h240/g, "s120") + ");'></i><b>"+c.dm+"</b>";
           
            }
              
              
                b.setAttribute("dataImg", c.imgAnime);
                b.setAttribute("dataColor", c.colorBg);
                if (c.marginL != undefined) {
                    b.setAttribute("dataMarginL", c.marginL)
                } else {
                    b.setAttribute("dataMarginL", 0)
                }
                b.setAttribute("title", d);


             
               
               
                g.appendChild(b)
            });
            $("#doimaunen").colorpicker().change(function() {
                var a = $("#doimaunen").val();
                $(".demomau").css("background-color", a);
                $(".active span").css("color", a);
                colorBg = a
            });
            $("#tad-chonnv>div").click(function() {
                $("#tad-chonnv>div").removeClass("active");
                $(this).addClass("active");
                var c = $(this).attr("dataImg").replace(/h240/g, "s0");
                var a = $(this).attr("dataColor");
                var b = $(this).attr("dataMarginL");
                $("#tad-chonnv>div>span").attr("style", "");
                $(this).find("span").css("color", a);
                imgAnime = c;
                colorBg = a;
                marginL = b;
                $("#doimaunen").val(a).trigger("change");
                $("#doimaunen").colorpicker("setValue", a);

                var bb = $(this).find("b").text();

       
$("#chondanhmuc").val(bb)


            });
            $("#tad-chonnv").children("div:first-child").click();
            var h = $(".tad-in-text1");
            var e = $(".tad-in-text2");
            h.on("input", function() {
                f()
            });
            e.on("input", function() {
                f()
            });
    
            function f() {
                if (undefined !== h.val() && h.val().length == 0) {
                    $("#tad-taoanh").addClass("disabled")
                } else {
                    if (undefined !== e.val() && e.val().length == 0) {
                        $("#tad-taoanh").addClass("disabled")
                    } else {
                        $("#tad-taoanh").removeClass("disabled")
                    }
                }
            }
            $("#tad-taoanh").click(function() {
                $("#img-out").hide();
                $("#tad-taoanh").addClass("disabled").html("<span class='spinner-border spinner-border-sm'></span> Đang tạo ảnh");
                i()
            });
    
            function i() {
                document.fonts.load('10pt "GMV DIN Pro Cond"').then(function() {
                    document.fonts.load('bold 10pt "GMV DIN Pro Cond"').then(function() {
                        var a = new Image();
                        a.crossOrigin = "Anonymous";
                     
                        a.src = imgAnime;
                        a.onload = function() {
                            var b = new Image();
                            b.crossOrigin = "Anonymous";
                            b.src = "https://lh3.googleusercontent.com/-JZxo4uTVIKQ/YaS7VBjAojI/AAAAAAAA1rk/mg_Bp0Z6_yUGLp1lfC9ugriYTGFfRaXTwCNcBGAsYHQ/s0/layer-2.png";
                            b.onload = function() {
                                var c = new Image();
                                c.crossOrigin = "Anonymous";
                                c.src = "https://lh3.googleusercontent.com/-j9JKCim94ks/YaIMA7fVnPI/AAAAAAAA1k8/g9e5X5FfRH4NiG-7hHRNikGxViI2o8pYQCNcBGAsYHQ/s0/layer-3.png";
                                c.onload = function() {
                                    t1 = $(".tad-in-text1").val().toUpperCase();
                                    t2 = $(".tad-in-text2").val().toUpperCase();
                                    var k = document.getElementById("temp");
                                    var o = k.getContext("2d");
                                    o.save();
                                    o.fillStyle = colorBg;
                                    o.fillRect(0, 0, k.width, k.height);
                                    o.restore();
                                    o.save();
                                    o.drawImage(b, 0, 0, k.width, k.height);
                                    o.restore();
                                    o.save();
                                    o.globalCompositeOperation = "multiply";
                                    o.globalAlpha = "0.3";
                                    o.drawImage(a, -300, -300, 1500, 1500);
                                    o.restore();
                                    o.save();
                                    o.fillStyle = "#fff";
                                    o.transform(1, 0, 1, 1, 0, 0);
                                    o.fillRect(500, 0, 650, 740);
                                    o.restore();
                                    o.save();
                                    o.beginPath();
                                    o.save();
                                    o.transform(1, 0, 1, 1, 0, 0);
                                    o.rect(500, 0, 650, 740);
                                    o.restore();
                                    o.clip();
                                    o.save();
                                    o.globalAlpha = "0.2";
                                    o.drawImage(a, 300, -300, 1500, 1500);
                                    o.restore();
                                    o.save();
                                    o.drawImage(c, 0, 0, k.width, k.height);
                                    o.restore();
                                    o.save();
                                    o.globalCompositeOperation = "color";
                                    o.fillStyle = "#000";
                                    o.fillRect(0, 0, k.width, k.height);
                                    o.restore();
                                    o.restore();
                                    var j = 950;
                                    var d = 600;
                                    var v = 180;
                                    var m = "300px";
                                    var l = 3;
                                    var n = "0.5";
                                    o.save();
                                    o.beginPath();
                                    o.save();
                                    o.transform(1, 0, 1, 1, 0, 0);
                                    o.rect(500, 0, 650, 740);
                                    o.restore();
                                    o.clip();
                                    o.save();
                                    o.globalAlpha = n;
                                    o.translate(j, d);
                                    o.rotate(Math.PI / 180 * 45);
                                    o.strokeStyle = colorBg;
                                    o.lineWidth = l;
                                    o.textAlign = "center";
                                    o.font = "bold " + m + " GMV DIN Pro Cond";
                                    o.strokeText(xoa_dau(t1).split("").join(String.fromCharCode(8202)), 0, 0);
                                    o.restore();
                                    o.save();
                                    o.globalAlpha = n;
                                    o.fillStyle = colorBg;
                                    o.lineWidth = l;
                                    o.translate(j + v, d - v);
                                    o.rotate(Math.PI / 180 * 45);
                                    o.textAlign = "center";
                                    o.font = "bold " + m + " GMV DIN Pro Cond";
                                    o.fillText(xoa_dau(t1).split("").join(String.fromCharCode(8202)), 0, 0);
                                    o.restore();
                                    o.save();
                                    o.globalAlpha = n;
                                    o.translate(j + v * 2, d - v * 2);
                                    o.rotate(Math.PI / 180 * 45);
                                    o.strokeStyle = colorBg;
                                    o.lineWidth = l;
                                    o.textAlign = "center";
                                    o.font = "bold " + m + " GMV DIN Pro Cond";
                                    o.strokeText(xoa_dau(t1).split("").join(String.fromCharCode(8202)), 0, 0);
                                    o.restore();
                                    o.restore();
                                    o.save();
                                    o.shadowColor = "rgba(0,0,0, 0.3)";
                                    o.shadowBlur = 10;
                                    o.shadowOffsetX = 0;
                                    o.shadowOffsetY = 0;
                                    o.drawImage(a, 900 + Number(marginL), -200, 1000, 1000);
                                    o.restore();
                                    o.save();
                                    o.fillStyle = "#fff";
                                    o.textAlign = "center";
                                    o.font = "bold 75px GMV DIN Pro Cond";
                                    o.fillText(t1.split("").join(String.fromCharCode(8202)), 430, 380);
                                    o.restore();
                                    o.save();
                                    o.fillStyle = "#fff";
                                    o.textAlign = "center";
                                    o.font = "37px GMV DIN Pro Cond";
                                    o.fillText(t2.split("").join(String.fromCharCode(8200)), 430, 440);
                                    o.restore();
                                    o.save();
                                    o.fillStyle = "#fff";
                                    o.fillRect(430 - 300 / 2, 470, 300, 5);
                                    o.font = "37px GMV DIN Pro Cond";
                                    o.fillText("+ + +".toUpperCase(), 200, 300);
                                    o.restore();
                                    tadUpload(k)
                                }
                            }
                        }
                    })
                })
            }
        // }
    });</script>
    <link rel='stylesheet' href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-colorpicker/2.5.3/css/bootstrap-colorpicker.min.css"/>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-colorpicker/2.5.3/js/bootstrap-colorpicker.min.js"></script>
    <script>
        //<![CDATA[
    var urlanh, tadcanv;
    
    function tadUpload(b) {
    tadcanv = b; 
    
    var z = b.toDataURL('image/jpeg',0.9);
    
    
    $("#img-out").html("<label class='mt-2'> Kết quả: </label><img src='"+z+"' alt='Kết quả' class='img-thumbnail'><a href='#' class='btn btn-block btn-primary mt-2 taianh' onclick='taianh()'><i class='fas fa-cloud-download-alt'></i> Tải ảnh về</a><button class='btn btn-block btn-outline-primary mt-2 tad-shareimg' onclick='shareImg()'><i class='fas fa-share'></i> Chia sẻ ảnh</button><div id='share-out'></div>")
    
    
    
    
    
    
    setTimeout(function(){
      $("#tad-taoanh").removeClass("disabled").html("<i class='fas fa-cut'></i> Tạo ảnh"); $("#img-out").show()
    }, 1000);
      
      if (typeof (hengio) === 'undefined') {}
    
    else{
    
    clearTimeout(hengio);
    
    }
      
    
    if (typeof ($('#formTime')) === 'undefined') {}
    
    else{
    
    if($(".tad-timetao").val() >= 10){
    
    $('#formTime').submit();
    
    }
    
    }
    
    
    
    }
    
    function taianh(){
    var linkt = $("#img-out img").attr("src");
    $(".taianh").attr("href",linkt)
    $(".taianh").attr("download","taoanhdep_"+tenanhxuat +".jpg")
    }
    //]]>
    
    </script>