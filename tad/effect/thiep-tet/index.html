<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>

    <link as='style' href='https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.5.0/css/bootstrap.min.css'
        media='all' rel='stylesheet' />
<script> var tmbq = '127.0.0.1'; </script>
    <script crossorigin='anonymous'
        integrity='sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg=='
        src='https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js'></script>

    <script src='https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.5.0/js/bootstrap.min.js'></script>


    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/5.14.0/css/all.min.css" media="all">

</head>

<body class="col">

    <link rel="stylesheet" media='all' href="https://cdn.taoanhdep.com/font/thuphap/stylesheet.css" />

    <img alt="Blank" class="d-none" height="0" id="Cimg"
        src="https://1.bp.blogspot.com/-z3RZ2G93tVo/YHES6yUdnzI/AAAAAAAArsw/Jq_pD24Pn-sEW-XwzGl18qlgIYQZZOeqgCNcBGAsYHQ/s0/blank.png"
        width="0">

        <textarea class="form-control tad-in-texta" rows="3" placeholder="Nhập caption">Năm mới Nhâm Dần, (tên doanh nghiệp) kính chúc Quý khách đón xuân sum vầy, ấm áp, an vui và vạn sự như ý, thành công rực rỡ! Happy new year!</textarea>


    <canvas id="temp" width="2000" height="760" style="border:1px solid #d3d3d3;width: 100%;">
        Your browser does not support the canvas element.
    </canvas>

    <script>



        document.fonts.load('10pt "SVN-Bariol"').then(function () {

            var a = new Image();
            a.crossOrigin = "Anonymous";
            a.src = "https://lh3.googleusercontent.com/-SoaDTxRFghA/YfEs8DWCXBI/AAAAAAAA4fA/ayepQy0YMKgH3PSqua1mM-5kgB59oF5gACNcBGAsYHQ/s0/thiep-1.jpg";
            a.onload = function () {

                //https://lh3.googleusercontent.com/-_BJaV8myHZ0/YfEv97103CI/AAAAAAAA4fI/eXvFwT4EHEAoiY9mdvLOr1yaq-qYNGf1wCNcBGAsYHQ/h240/thiep-2.jpg

                var c = document.getElementById("temp");

                var ctx = c.getContext("2d");
                c.width = a.width;
                c.height = a.height;

       ctx.drawImage(a, 0, 0, c.width, c.height);

     

       function wrapText(context, text, x, y, line_width, line_height)
{
    var line = '';
    var paragraphs = text.split('\n');


    for (var i = 0; i < paragraphs.length; i++)
    {
        var words = paragraphs[i].split(' ');
        for (var n = 0; n < words.length; n++)
        {
            var testLine = line + words[n] + ' ';
            var metrics = context.measureText(testLine);
            var testWidth = metrics.width;
            if (testWidth > line_width && n > 0)
            {
                context.fillText(line, x, y);
                line = words[n] + ' ';
                y += line_height;
            }
            else
            {
                line = testLine;
            }
        }
        context.fillText(line, x, y);
        y += line_height;
        line = '';
    }
}

         
var maxWidth = 1000;
      var lineHeight = 80;
      var x = 100;
      var y = 320;
      var text = $(".tad-in-texta").val();

      ctx.font = '50pt SVN-Bariol';
      ctx.fillStyle = '#d64f55';

      wrapText(ctx, text, x, y, maxWidth, lineHeight);



            }
        })

    </script>



</body>
</html>